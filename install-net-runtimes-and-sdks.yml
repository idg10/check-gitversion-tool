parameters:
- name: runtimes
  type: object
  default:
  - 3.1.x
- name: sdks
  type: object
  default: []
- name: sdk
  type: string
  default: "5.x"


steps:
- ${{ each runtimeVersion in parameters.runtimes }}:
  - task: UseDotNet@2
    displayName: 'Install .NET runtime ${{ runtimeVersion }}'
    inputs:
      packageType: 'runtime'
      version: '${{ runtimeVersion }}'

- ${{ each sdkVersion in variables.sdkList }}:
  - task: UseDotNet@2
    variables:
      ${{ if parameters.sdks }}
        sdkList: ${{ parameters.sdks }}
      ${{ if parameters.sdk }}
        sdkList: [${{ parameters.sdks }}]
    displayName: 'Install .NET Core SDK ${{ sdkVersion }}'
    inputs:
      packageType: sdk
      version: '${{ sdkVersion }}'

- powershell: |
    nuget sources
    dotnet --info
  displayName: 'Ensure NuGet initializes sources'
